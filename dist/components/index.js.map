{"version":3,"sources":["../../src/components/index.ts","../../src/components/AddToCartButton.tsx","../../src/hooks/useCart.ts","../../src/tracking/analytics.ts","../../src/components/CartDrawer.tsx","../../src/utils/money.ts","../../src/components/ProductCard/index.tsx","../../src/components/CustomerPortal/index.tsx","../../src/hooks/useCustomer.ts","../../src/hooks/useSubscription.ts","../../src/components/SubscribeWidget/index.tsx"],"sourcesContent":["export { AddToCartButton, type AddToCartButtonProps } from './AddToCartButton'\nexport { CartDrawer, type CartDrawerProps } from './CartDrawer'\nexport { ProductCard, type ProductCardProps } from './ProductCard'\nexport { CustomerPortal, type CustomerPortalProps } from './CustomerPortal'\nexport {\n  SubscribeWidget,\n  type SubscribeWidgetProps,\n  type SellingPlan,\n} from './SubscribeWidget'\n","'use client'\n\nimport React, { useState } from 'react'\nimport { useCart, type CartItem } from '../hooks/useCart'\nimport { trackAddToCart } from '../tracking/analytics'\n\nexport interface AddToCartButtonProps {\n  product: {\n    id: string\n    title: string\n    handle: string\n    images?: Array<{ url: string; altText: string | null }>\n  }\n  variant: {\n    id: string\n    title: string\n    price: number\n    compareAtPrice: number | null\n    availableForSale: boolean\n  }\n  quantity?: number\n  className?: string\n  children?: React.ReactNode\n  onAdd?: () => void\n}\n\nexport function AddToCartButton({\n  product,\n  variant,\n  quantity = 1,\n  className,\n  children,\n  onAdd,\n}: AddToCartButtonProps) {\n  const [isAdding, setIsAdding] = useState(false)\n  const { addItem, openCart } = useCart()\n\n  const handleClick = async () => {\n    if (!variant.availableForSale) return\n\n    setIsAdding(true)\n\n    // Add to cart\n    const cartItem: Omit<CartItem, 'quantity'> = {\n      variantId: variant.id,\n      productId: product.id,\n      title: product.title,\n      variantTitle: variant.title,\n      price: variant.price,\n      compareAtPrice: variant.compareAtPrice,\n      handle: product.handle,\n      image: product.images?.[0],\n    }\n\n    addItem(cartItem, quantity)\n\n    // Track analytics\n    trackAddToCart({\n      item_id: variant.id,\n      item_name: product.title,\n      item_variant: variant.title,\n      price: variant.price,\n      quantity,\n    })\n\n    // Optional callback\n    onAdd?.()\n\n    // Open cart drawer\n    openCart()\n\n    // Reset loading state\n    setTimeout(() => setIsAdding(false), 300)\n  }\n\n  const isDisabled = !variant.availableForSale || isAdding\n\n  return (\n    <button\n      onClick={handleClick}\n      disabled={isDisabled}\n      className={className}\n      type=\"button\"\n    >\n      {children ||\n        (isAdding\n          ? 'Adding...'\n          : variant.availableForSale\n          ? 'Add to Cart'\n          : 'Sold Out')}\n    </button>\n  )\n}\n","'use client'\n\nimport { create } from 'zustand'\nimport { persist } from 'zustand/middleware'\n\nexport interface CartItem {\n  variantId: string\n  productId: string\n  title: string\n  variantTitle: string\n  price: number\n  compareAtPrice: number | null\n  quantity: number\n  image?: {\n    url: string\n    altText: string | null\n  }\n  handle: string\n}\n\nexport interface CartState {\n  items: CartItem[]\n  isOpen: boolean\n\n  // Actions\n  addItem: (item: Omit<CartItem, 'quantity'>, quantity?: number) => void\n  removeItem: (variantId: string) => void\n  updateQuantity: (variantId: string, quantity: number) => void\n  clearCart: () => void\n  openCart: () => void\n  closeCart: () => void\n  toggleCart: () => void\n\n  // Computed (need to be accessed via getters)\n  getSubtotal: () => number\n  getItemCount: () => number\n}\n\nexport const useCartStore = create<CartState>()(\n  persist(\n    (set, get) => ({\n      items: [],\n      isOpen: false,\n\n      addItem: (item, quantity = 1) => {\n        set((state) => {\n          const existingIndex = state.items.findIndex(\n            (i) => i.variantId === item.variantId\n          )\n\n          if (existingIndex >= 0) {\n            // Update quantity\n            const newItems = [...state.items]\n            newItems[existingIndex] = {\n              ...newItems[existingIndex],\n              quantity: newItems[existingIndex].quantity + quantity,\n            }\n            return { items: newItems }\n          }\n\n          // Add new item\n          return {\n            items: [...state.items, { ...item, quantity }],\n          }\n        })\n      },\n\n      removeItem: (variantId) => {\n        set((state) => ({\n          items: state.items.filter((i) => i.variantId !== variantId),\n        }))\n      },\n\n      updateQuantity: (variantId, quantity) => {\n        if (quantity <= 0) {\n          get().removeItem(variantId)\n          return\n        }\n\n        set((state) => ({\n          items: state.items.map((item) =>\n            item.variantId === variantId ? { ...item, quantity } : item\n          ),\n        }))\n      },\n\n      clearCart: () => set({ items: [] }),\n      openCart: () => set({ isOpen: true }),\n      closeCart: () => set({ isOpen: false }),\n      toggleCart: () => set((state) => ({ isOpen: !state.isOpen })),\n\n      getSubtotal: () => {\n        return get().items.reduce(\n          (total, item) => total + item.price * item.quantity,\n          0\n        )\n      },\n\n      getItemCount: () => {\n        return get().items.reduce((count, item) => count + item.quantity, 0)\n      },\n    }),\n    {\n      name: 'adsurf-cart',\n      partialize: (state) => ({ items: state.items }),\n    }\n  )\n)\n\n/**\n * Hook for cart state and actions\n */\nexport function useCart() {\n  const store = useCartStore()\n\n  return {\n    items: store.items,\n    isOpen: store.isOpen,\n    subtotal: store.getSubtotal(),\n    itemCount: store.getItemCount(),\n\n    addItem: store.addItem,\n    removeItem: store.removeItem,\n    updateQuantity: store.updateQuantity,\n    clearCart: store.clearCart,\n    openCart: store.openCart,\n    closeCart: store.closeCart,\n    toggleCart: store.toggleCart,\n  }\n}\n","/**\n * Analytics and tracking utilities\n *\n * Supports GA4, Meta Pixel, and Microsoft Clarity\n */\n\ndeclare global {\n  interface Window {\n    gtag?: (...args: unknown[]) => void\n    fbq?: (...args: unknown[]) => void\n    clarity?: (...args: unknown[]) => void\n  }\n}\n\nexport interface AnalyticsConfig {\n  ga4Id?: string\n  metaPixelId?: string\n  clarityId?: string\n}\n\nexport interface EcommerceItem {\n  item_id: string\n  item_name: string\n  item_brand?: string\n  item_category?: string\n  item_variant?: string\n  price: number\n  quantity: number\n}\n\n/**\n * Initialize analytics scripts\n */\nexport function initializeAnalytics(config: AnalyticsConfig): void {\n  if (typeof window === 'undefined') return\n\n  // GA4\n  if (config.ga4Id && !window.gtag) {\n    const script = document.createElement('script')\n    script.src = `https://www.googletagmanager.com/gtag/js?id=${config.ga4Id}`\n    script.async = true\n    document.head.appendChild(script)\n\n    window.gtag = function () {\n      // eslint-disable-next-line prefer-rest-params\n      ;(window as { dataLayer?: unknown[] }).dataLayer =\n        (window as { dataLayer?: unknown[] }).dataLayer || []\n      // eslint-disable-next-line prefer-rest-params\n      ;(window as { dataLayer?: unknown[] }).dataLayer!.push(arguments)\n    }\n    window.gtag('js', new Date())\n    window.gtag('config', config.ga4Id)\n  }\n\n  // Meta Pixel\n  if (config.metaPixelId && !window.fbq) {\n    const script = document.createElement('script')\n    script.innerHTML = `\n      !function(f,b,e,v,n,t,s)\n      {if(f.fbq)return;n=f.fbq=function(){n.callMethod?\n      n.callMethod.apply(n,arguments):n.queue.push(arguments)};\n      if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';\n      n.queue=[];t=b.createElement(e);t.async=!0;\n      t.src=v;s=b.getElementsByTagName(e)[0];\n      s.parentNode.insertBefore(t,s)}(window, document,'script',\n      'https://connect.facebook.net/en_US/fbevents.js');\n      fbq('init', '${config.metaPixelId}');\n      fbq('track', 'PageView');\n    `\n    document.head.appendChild(script)\n  }\n\n  // Microsoft Clarity\n  if (config.clarityId && !window.clarity) {\n    const script = document.createElement('script')\n    script.innerHTML = `\n      (function(c,l,a,r,i,t,y){\n        c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};\n        t=l.createElement(r);t.async=1;t.src=\"https://www.clarity.ms/tag/\"+i;\n        y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);\n      })(window, document, \"clarity\", \"script\", \"${config.clarityId}\");\n    `\n    document.head.appendChild(script)\n  }\n}\n\n/**\n * Track page view\n */\nexport function trackPageView(pagePath: string, pageTitle?: string): void {\n  if (typeof window === 'undefined') return\n\n  // GA4\n  window.gtag?.('event', 'page_view', {\n    page_path: pagePath,\n    page_title: pageTitle,\n  })\n\n  // Meta Pixel\n  window.fbq?.('track', 'PageView')\n}\n\n/**\n * Track product view\n */\nexport function trackViewItem(item: EcommerceItem): void {\n  if (typeof window === 'undefined') return\n\n  // GA4\n  window.gtag?.('event', 'view_item', {\n    currency: 'USD',\n    value: item.price,\n    items: [item],\n  })\n\n  // Meta Pixel\n  window.fbq?.('track', 'ViewContent', {\n    content_ids: [item.item_id],\n    content_name: item.item_name,\n    content_type: 'product',\n    value: item.price,\n    currency: 'USD',\n  })\n}\n\n/**\n * Track add to cart\n */\nexport function trackAddToCart(item: EcommerceItem): void {\n  if (typeof window === 'undefined') return\n\n  // GA4\n  window.gtag?.('event', 'add_to_cart', {\n    currency: 'USD',\n    value: item.price * item.quantity,\n    items: [item],\n  })\n\n  // Meta Pixel\n  window.fbq?.('track', 'AddToCart', {\n    content_ids: [item.item_id],\n    content_name: item.item_name,\n    content_type: 'product',\n    value: item.price * item.quantity,\n    currency: 'USD',\n  })\n}\n\n/**\n * Track remove from cart\n */\nexport function trackRemoveFromCart(item: EcommerceItem): void {\n  if (typeof window === 'undefined') return\n\n  // GA4\n  window.gtag?.('event', 'remove_from_cart', {\n    currency: 'USD',\n    value: item.price * item.quantity,\n    items: [item],\n  })\n}\n\n/**\n * Track begin checkout\n */\nexport function trackBeginCheckout(items: EcommerceItem[], value: number): void {\n  if (typeof window === 'undefined') return\n\n  // GA4\n  window.gtag?.('event', 'begin_checkout', {\n    currency: 'USD',\n    value,\n    items,\n  })\n\n  // Meta Pixel\n  window.fbq?.('track', 'InitiateCheckout', {\n    content_ids: items.map((i) => i.item_id),\n    num_items: items.reduce((sum, i) => sum + i.quantity, 0),\n    value,\n    currency: 'USD',\n  })\n}\n\n/**\n * Track purchase\n */\nexport function trackPurchase(\n  transactionId: string,\n  items: EcommerceItem[],\n  value: number\n): void {\n  if (typeof window === 'undefined') return\n\n  // GA4\n  window.gtag?.('event', 'purchase', {\n    transaction_id: transactionId,\n    currency: 'USD',\n    value,\n    items,\n  })\n\n  // Meta Pixel\n  window.fbq?.('track', 'Purchase', {\n    content_ids: items.map((i) => i.item_id),\n    content_type: 'product',\n    num_items: items.reduce((sum, i) => sum + i.quantity, 0),\n    value,\n    currency: 'USD',\n  })\n}\n\n/**\n * Track custom event\n */\nexport function trackEvent(\n  eventName: string,\n  params?: Record<string, unknown>\n): void {\n  if (typeof window === 'undefined') return\n\n  // GA4\n  window.gtag?.('event', eventName, params)\n}\n","'use client'\n\nimport React from 'react'\nimport { useCart } from '../hooks/useCart'\n\nexport interface CartDrawerProps {\n  onCheckout?: () => void\n  className?: string\n  overlayClassName?: string\n  drawerClassName?: string\n  formatPrice?: (price: number) => string\n}\n\n/**\n * Slide-out cart drawer component\n *\n * Provides a default styling but can be customized via className props\n */\nexport function CartDrawer({\n  onCheckout,\n  className,\n  overlayClassName,\n  drawerClassName,\n  formatPrice = (p) => `$${p.toFixed(2)}`,\n}: CartDrawerProps) {\n  const { items, isOpen, closeCart, subtotal, updateQuantity, removeItem } = useCart()\n\n  if (!isOpen) return null\n\n  return (\n    <div className={className}>\n      {/* Overlay */}\n      <div\n        className={overlayClassName || 'fixed inset-0 bg-black/50 z-40'}\n        onClick={closeCart}\n      />\n\n      {/* Drawer */}\n      <div\n        className={\n          drawerClassName ||\n          'fixed right-0 top-0 h-full w-full max-w-md bg-white z-50 shadow-xl flex flex-col'\n        }\n      >\n        {/* Header */}\n        <div className=\"flex items-center justify-between p-4 border-b\">\n          <h2 className=\"text-lg font-semibold\">Your Cart</h2>\n          <button\n            onClick={closeCart}\n            className=\"p-2 hover:bg-gray-100 rounded-lg\"\n            aria-label=\"Close cart\"\n          >\n            <svg\n              className=\"w-5 h-5\"\n              fill=\"none\"\n              stroke=\"currentColor\"\n              viewBox=\"0 0 24 24\"\n            >\n              <path\n                strokeLinecap=\"round\"\n                strokeLinejoin=\"round\"\n                strokeWidth={2}\n                d=\"M6 18L18 6M6 6l12 12\"\n              />\n            </svg>\n          </button>\n        </div>\n\n        {/* Items */}\n        <div className=\"flex-1 overflow-y-auto p-4\">\n          {items.length === 0 ? (\n            <div className=\"text-center py-12 text-gray-500\">\n              Your cart is empty\n            </div>\n          ) : (\n            <div className=\"space-y-4\">\n              {items.map((item) => (\n                <div key={item.variantId} className=\"flex gap-4\">\n                  {/* Image */}\n                  {item.image && (\n                    <div className=\"w-20 h-20 bg-gray-100 rounded-lg overflow-hidden flex-shrink-0\">\n                      <img\n                        src={item.image.url}\n                        alt={item.image.altText || item.title}\n                        className=\"w-full h-full object-cover\"\n                      />\n                    </div>\n                  )}\n\n                  {/* Details */}\n                  <div className=\"flex-1 min-w-0\">\n                    <h3 className=\"font-medium text-gray-900 truncate\">\n                      {item.title}\n                    </h3>\n                    {item.variantTitle !== 'Default Title' && (\n                      <p className=\"text-sm text-gray-500\">{item.variantTitle}</p>\n                    )}\n                    <p className=\"font-medium mt-1\">{formatPrice(item.price)}</p>\n\n                    {/* Quantity controls */}\n                    <div className=\"flex items-center gap-2 mt-2\">\n                      <button\n                        onClick={() =>\n                          updateQuantity(item.variantId, item.quantity - 1)\n                        }\n                        className=\"w-8 h-8 flex items-center justify-center border rounded hover:bg-gray-50\"\n                      >\n                        -\n                      </button>\n                      <span className=\"w-8 text-center\">{item.quantity}</span>\n                      <button\n                        onClick={() =>\n                          updateQuantity(item.variantId, item.quantity + 1)\n                        }\n                        className=\"w-8 h-8 flex items-center justify-center border rounded hover:bg-gray-50\"\n                      >\n                        +\n                      </button>\n                      <button\n                        onClick={() => removeItem(item.variantId)}\n                        className=\"ml-auto text-sm text-red-600 hover:text-red-700\"\n                      >\n                        Remove\n                      </button>\n                    </div>\n                  </div>\n                </div>\n              ))}\n            </div>\n          )}\n        </div>\n\n        {/* Footer */}\n        {items.length > 0 && (\n          <div className=\"border-t p-4 space-y-4\">\n            <div className=\"flex justify-between text-lg font-semibold\">\n              <span>Subtotal</span>\n              <span>{formatPrice(subtotal)}</span>\n            </div>\n            <button\n              onClick={onCheckout}\n              className=\"w-full py-3 bg-black text-white rounded-lg font-medium hover:bg-gray-800 transition-colors\"\n            >\n              Checkout\n            </button>\n          </div>\n        )}\n      </div>\n    </div>\n  )\n}\n","/**\n * Money formatting utilities\n */\n\nexport interface FormatMoneyOptions {\n  currency?: string\n  locale?: string\n  showCents?: boolean\n}\n\n/**\n * Format a price for display\n */\nexport function formatMoney(\n  amount: number,\n  options: FormatMoneyOptions = {}\n): string {\n  const { currency = 'USD', locale = 'en-US', showCents = true } = options\n\n  return new Intl.NumberFormat(locale, {\n    style: 'currency',\n    currency,\n    minimumFractionDigits: showCents ? 2 : 0,\n    maximumFractionDigits: showCents ? 2 : 0,\n  }).format(amount)\n}\n\n/**\n * Calculate discount percentage\n */\nexport function calculateDiscount(\n  originalPrice: number,\n  salePrice: number\n): number {\n  if (originalPrice <= 0 || salePrice >= originalPrice) return 0\n  return Math.round(((originalPrice - salePrice) / originalPrice) * 100)\n}\n\n/**\n * Format discount for display\n */\nexport function formatDiscount(\n  originalPrice: number,\n  salePrice: number\n): string {\n  const discount = calculateDiscount(originalPrice, salePrice)\n  return discount > 0 ? `${discount}% OFF` : ''\n}\n","'use client'\n\nimport React from 'react'\nimport type { Product } from '../../client/api'\nimport { formatMoney } from '../../utils/money'\nimport { AddToCartButton } from '../AddToCartButton'\n\nexport interface ProductCardProps {\n  product: Product\n  className?: string\n  showAddToCart?: boolean\n  onProductClick?: (product: Product) => void\n  imageClassName?: string\n  priceFormatter?: (amount: number, currency: string) => string\n}\n\nexport function ProductCard({\n  product,\n  className = '',\n  showAddToCart = true,\n  onProductClick,\n  imageClassName = '',\n  priceFormatter,\n}: ProductCardProps) {\n  const mainImage = product.images[0]\n  const mainVariant = product.variants[0]\n  const price = mainVariant?.price ?? product.price\n  const currency = mainVariant?.currency ?? product.currency\n  const compareAtPrice = mainVariant?.compareAtPrice\n\n  const hasDiscount = compareAtPrice !== null && compareAtPrice > price\n\n  const formatPrice = (amount: number, curr: string) => {\n    if (priceFormatter) {\n      return priceFormatter(amount, curr)\n    }\n    return formatMoney(amount, { currency: curr })\n  }\n\n  const handleClick = () => {\n    if (onProductClick) {\n      onProductClick(product)\n    }\n  }\n\n  return (\n    <div className={`group ${className}`}>\n      {/* Image */}\n      <div\n        className={`relative aspect-square overflow-hidden bg-gray-100 cursor-pointer ${imageClassName}`}\n        onClick={handleClick}\n      >\n        {mainImage ? (\n          <img\n            src={mainImage.url}\n            alt={mainImage.altText || product.title}\n            className=\"h-full w-full object-cover object-center group-hover:scale-105 transition-transform duration-300\"\n          />\n        ) : (\n          <div className=\"h-full w-full flex items-center justify-center text-gray-400\">\n            No image\n          </div>\n        )}\n\n        {hasDiscount && (\n          <span className=\"absolute top-2 left-2 bg-red-500 text-white text-xs px-2 py-1 rounded\">\n            Sale\n          </span>\n        )}\n      </div>\n\n      {/* Content */}\n      <div className=\"mt-4\">\n        <h3\n          className=\"text-sm font-medium text-gray-900 cursor-pointer hover:underline\"\n          onClick={handleClick}\n        >\n          {product.title}\n        </h3>\n\n        {/* Price */}\n        <div className=\"mt-1 flex items-center gap-2\">\n          <span className=\"text-sm font-medium text-gray-900\">\n            {formatPrice(price, currency)}\n          </span>\n          {hasDiscount && compareAtPrice !== null && (\n            <span className=\"text-sm text-gray-500 line-through\">\n              {formatPrice(compareAtPrice, currency)}\n            </span>\n          )}\n        </div>\n\n        {/* Add to Cart */}\n        {showAddToCart && mainVariant && (\n          <div className=\"mt-3\">\n            <AddToCartButton\n              product={product}\n              variant={mainVariant}\n              className=\"w-full py-2 px-4 bg-black text-white text-sm hover:bg-gray-800 transition-colors\"\n            />\n          </div>\n        )}\n      </div>\n    </div>\n  )\n}\n\nexport default ProductCard\n","'use client'\n\nimport React, { useState } from 'react'\nimport { useCustomer, type CustomerOrder, type CustomerSubscription } from '../../hooks/useCustomer'\nimport { useSubscription } from '../../hooks/useSubscription'\nimport { formatMoney } from '../../utils/money'\n\nexport interface CustomerPortalProps {\n  className?: string\n  apiKey?: string\n  baseUrl?: string\n  onLoginRedirect?: () => void\n  formatPrice?: (amount: string, currency: string) => string\n}\n\ntype TabType = 'orders' | 'subscriptions' | 'profile'\n\nexport function CustomerPortal({\n  className = '',\n  apiKey,\n  baseUrl,\n  onLoginRedirect,\n  formatPrice,\n}: CustomerPortalProps) {\n  const [activeTab, setActiveTab] = useState<TabType>('orders')\n  const customer = useCustomer({ apiKey, baseUrl })\n  const subscription = useSubscription({ apiKey, baseUrl })\n\n  const defaultFormatPrice = (amount: string, currency: string) => {\n    if (formatPrice) return formatPrice(amount, currency)\n    return formatMoney(parseFloat(amount), { currency })\n  }\n\n  if (customer.loading) {\n    return (\n      <div className={`flex items-center justify-center py-12 ${className}`}>\n        <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900\" />\n      </div>\n    )\n  }\n\n  if (!customer.isLoggedIn) {\n    return (\n      <div className={`text-center py-12 ${className}`}>\n        <h2 className=\"text-xl font-semibold mb-4\">Please log in to view your account</h2>\n        {onLoginRedirect && (\n          <button\n            onClick={onLoginRedirect}\n            className=\"px-6 py-2 bg-black text-white hover:bg-gray-800 transition-colors\"\n          >\n            Log In\n          </button>\n        )}\n      </div>\n    )\n  }\n\n  return (\n    <div className={className}>\n      {/* Profile header */}\n      {customer.profile && (\n        <div className=\"mb-8\">\n          <h1 className=\"text-2xl font-semibold\">\n            Welcome, {customer.profile.firstName || 'Customer'}\n          </h1>\n          <p className=\"text-gray-600\">{customer.profile.email}</p>\n        </div>\n      )}\n\n      {/* Tabs */}\n      <div className=\"border-b mb-6\">\n        <nav className=\"flex gap-8\">\n          {(['orders', 'subscriptions', 'profile'] as const).map((tab) => (\n            <button\n              key={tab}\n              onClick={() => setActiveTab(tab)}\n              className={`py-3 text-sm font-medium border-b-2 -mb-px transition-colors ${\n                activeTab === tab\n                  ? 'border-black text-black'\n                  : 'border-transparent text-gray-500 hover:text-gray-700'\n              }`}\n            >\n              {tab.charAt(0).toUpperCase() + tab.slice(1)}\n            </button>\n          ))}\n        </nav>\n      </div>\n\n      {/* Tab content */}\n      {activeTab === 'orders' && (\n        <OrdersTab orders={customer.orders} formatPrice={defaultFormatPrice} />\n      )}\n      {activeTab === 'subscriptions' && (\n        <SubscriptionsTab\n          subscriptions={customer.subscriptions}\n          customerToken={customer.accessToken || ''}\n          subscriptionActions={subscription}\n          formatPrice={defaultFormatPrice}\n          onRefresh={customer.refetch}\n        />\n      )}\n      {activeTab === 'profile' && customer.profile && (\n        <ProfileTab\n          profile={customer.profile}\n          onUpdate={customer.updateProfile}\n          onLogout={customer.logout}\n        />\n      )}\n    </div>\n  )\n}\n\n// Orders Tab Component\nfunction OrdersTab({\n  orders,\n  formatPrice,\n}: {\n  orders: CustomerOrder[]\n  formatPrice: (amount: string, currency: string) => string\n}) {\n  if (orders.length === 0) {\n    return (\n      <div className=\"text-center py-12 text-gray-500\">\n        You haven&apos;t placed any orders yet.\n      </div>\n    )\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      {orders.map((order) => (\n        <div key={order.id} className=\"border rounded-lg p-6\">\n          <div className=\"flex justify-between items-start mb-4\">\n            <div>\n              <h3 className=\"font-medium\">Order #{order.orderNumber}</h3>\n              <p className=\"text-sm text-gray-500\">\n                {new Date(order.processedAt).toLocaleDateString()}\n              </p>\n            </div>\n            <div className=\"text-right\">\n              <span className={`inline-block px-2 py-1 text-xs rounded ${\n                order.fulfillmentStatus === 'fulfilled'\n                  ? 'bg-green-100 text-green-800'\n                  : 'bg-yellow-100 text-yellow-800'\n              }`}>\n                {order.fulfillmentStatus || 'Unfulfilled'}\n              </span>\n              <p className=\"mt-1 font-medium\">\n                {formatPrice(order.totalPrice.amount, order.totalPrice.currencyCode)}\n              </p>\n            </div>\n          </div>\n\n          <div className=\"space-y-3\">\n            {order.lineItems.map((item, idx) => (\n              <div key={idx} className=\"flex gap-4\">\n                {item.variant.image && (\n                  <img\n                    src={item.variant.image.url}\n                    alt={item.variant.image.altText || item.title}\n                    className=\"w-16 h-16 object-cover rounded\"\n                  />\n                )}\n                <div className=\"flex-1\">\n                  <p className=\"font-medium\">{item.title}</p>\n                  <p className=\"text-sm text-gray-500\">Qty: {item.quantity}</p>\n                </div>\n                <p className=\"font-medium\">\n                  {formatPrice(item.variant.price.amount, item.variant.price.currencyCode)}\n                </p>\n              </div>\n            ))}\n          </div>\n        </div>\n      ))}\n    </div>\n  )\n}\n\n// Subscriptions Tab Component\nfunction SubscriptionsTab({\n  subscriptions,\n  customerToken,\n  subscriptionActions,\n  formatPrice,\n  onRefresh,\n}: {\n  subscriptions: CustomerSubscription[]\n  customerToken: string\n  subscriptionActions: ReturnType<typeof useSubscription>\n  formatPrice: (amount: string, currency: string) => string\n  onRefresh: () => void\n}) {\n  const [actionLoading, setActionLoading] = useState<string | null>(null)\n\n  const handleAction = async (\n    subscriptionId: string,\n    action: 'pause' | 'resume' | 'cancel' | 'skip'\n  ) => {\n    setActionLoading(`${subscriptionId}-${action}`)\n    try {\n      switch (action) {\n        case 'pause':\n          await subscriptionActions.pauseSubscription(customerToken, subscriptionId)\n          break\n        case 'resume':\n          await subscriptionActions.resumeSubscription(customerToken, subscriptionId)\n          break\n        case 'cancel':\n          if (window.confirm('Are you sure you want to cancel this subscription?')) {\n            await subscriptionActions.cancelSubscription(customerToken, subscriptionId)\n          }\n          break\n        case 'skip':\n          await subscriptionActions.skipNextDelivery(customerToken, subscriptionId)\n          break\n      }\n      onRefresh()\n    } catch {\n      // Error handled in hook\n    } finally {\n      setActionLoading(null)\n    }\n  }\n\n  if (subscriptions.length === 0) {\n    return (\n      <div className=\"text-center py-12 text-gray-500\">\n        You don&apos;t have any active subscriptions.\n      </div>\n    )\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      {subscriptions.map((sub) => (\n        <div key={sub.id} className=\"border rounded-lg p-6\">\n          <div className=\"flex justify-between items-start mb-4\">\n            <div>\n              <h3 className=\"font-medium\">{sub.product.title}</h3>\n              <p className=\"text-sm text-gray-500\">\n                Next billing: {new Date(sub.nextBillingDate).toLocaleDateString()}\n              </p>\n            </div>\n            <div className=\"text-right\">\n              <span className={`inline-block px-2 py-1 text-xs rounded ${\n                sub.status === 'active'\n                  ? 'bg-green-100 text-green-800'\n                  : sub.status === 'paused'\n                  ? 'bg-yellow-100 text-yellow-800'\n                  : 'bg-gray-100 text-gray-800'\n              }`}>\n                {sub.status}\n              </span>\n              <p className=\"mt-1 font-medium\">\n                {formatPrice(sub.price.amount, sub.price.currencyCode)}\n              </p>\n            </div>\n          </div>\n\n          <div className=\"flex gap-3 flex-wrap\">\n            {sub.status === 'active' && (\n              <>\n                <button\n                  onClick={() => handleAction(sub.id, 'skip')}\n                  disabled={actionLoading !== null}\n                  className=\"px-4 py-2 text-sm border rounded hover:bg-gray-50 disabled:opacity-50\"\n                >\n                  {actionLoading === `${sub.id}-skip` ? 'Skipping...' : 'Skip Next'}\n                </button>\n                <button\n                  onClick={() => handleAction(sub.id, 'pause')}\n                  disabled={actionLoading !== null}\n                  className=\"px-4 py-2 text-sm border rounded hover:bg-gray-50 disabled:opacity-50\"\n                >\n                  {actionLoading === `${sub.id}-pause` ? 'Pausing...' : 'Pause'}\n                </button>\n              </>\n            )}\n            {sub.status === 'paused' && (\n              <button\n                onClick={() => handleAction(sub.id, 'resume')}\n                disabled={actionLoading !== null}\n                className=\"px-4 py-2 text-sm bg-black text-white rounded hover:bg-gray-800 disabled:opacity-50\"\n              >\n                {actionLoading === `${sub.id}-resume` ? 'Resuming...' : 'Resume'}\n              </button>\n            )}\n            <button\n              onClick={() => handleAction(sub.id, 'cancel')}\n              disabled={actionLoading !== null}\n              className=\"px-4 py-2 text-sm text-red-600 border border-red-600 rounded hover:bg-red-50 disabled:opacity-50\"\n            >\n              {actionLoading === `${sub.id}-cancel` ? 'Cancelling...' : 'Cancel'}\n            </button>\n          </div>\n        </div>\n      ))}\n    </div>\n  )\n}\n\n// Profile Tab Component\nfunction ProfileTab({\n  profile,\n  onUpdate,\n  onLogout,\n}: {\n  profile: NonNullable<ReturnType<typeof useCustomer>['profile']>\n  onUpdate: ReturnType<typeof useCustomer>['updateProfile']\n  onLogout: () => void\n}) {\n  const [editing, setEditing] = useState(false)\n  const [saving, setSaving] = useState(false)\n  const [formData, setFormData] = useState({\n    firstName: profile.firstName || '',\n    lastName: profile.lastName || '',\n    phone: profile.phone || '',\n    acceptsMarketing: profile.acceptsMarketing,\n  })\n\n  const handleSave = async () => {\n    setSaving(true)\n    try {\n      await onUpdate(formData)\n      setEditing(false)\n    } catch {\n      // Error handled by hook\n    } finally {\n      setSaving(false)\n    }\n  }\n\n  return (\n    <div className=\"max-w-md\">\n      <div className=\"space-y-4\">\n        <div>\n          <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n            Email\n          </label>\n          <input\n            type=\"email\"\n            value={profile.email}\n            disabled\n            className=\"w-full px-3 py-2 border rounded bg-gray-50 text-gray-500\"\n          />\n        </div>\n\n        <div className=\"grid grid-cols-2 gap-4\">\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n              First Name\n            </label>\n            <input\n              type=\"text\"\n              value={editing ? formData.firstName : (profile.firstName || '')}\n              disabled={!editing}\n              onChange={(e) => setFormData({ ...formData, firstName: e.target.value })}\n              className={`w-full px-3 py-2 border rounded ${\n                editing ? 'bg-white' : 'bg-gray-50 text-gray-500'\n              }`}\n            />\n          </div>\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n              Last Name\n            </label>\n            <input\n              type=\"text\"\n              value={editing ? formData.lastName : (profile.lastName || '')}\n              disabled={!editing}\n              onChange={(e) => setFormData({ ...formData, lastName: e.target.value })}\n              className={`w-full px-3 py-2 border rounded ${\n                editing ? 'bg-white' : 'bg-gray-50 text-gray-500'\n              }`}\n            />\n          </div>\n        </div>\n\n        <div>\n          <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n            Phone\n          </label>\n          <input\n            type=\"tel\"\n            value={editing ? formData.phone : (profile.phone || '')}\n            disabled={!editing}\n            onChange={(e) => setFormData({ ...formData, phone: e.target.value })}\n            className={`w-full px-3 py-2 border rounded ${\n              editing ? 'bg-white' : 'bg-gray-50 text-gray-500'\n            }`}\n          />\n        </div>\n\n        {editing && (\n          <div className=\"flex items-center gap-2\">\n            <input\n              type=\"checkbox\"\n              id=\"marketing\"\n              checked={formData.acceptsMarketing}\n              onChange={(e) => setFormData({ ...formData, acceptsMarketing: e.target.checked })}\n              className=\"rounded\"\n            />\n            <label htmlFor=\"marketing\" className=\"text-sm text-gray-700\">\n              Receive marketing emails\n            </label>\n          </div>\n        )}\n\n        <div className=\"flex gap-3 pt-4\">\n          {editing ? (\n            <>\n              <button\n                onClick={handleSave}\n                disabled={saving}\n                className=\"px-4 py-2 bg-black text-white rounded hover:bg-gray-800 disabled:opacity-50\"\n              >\n                {saving ? 'Saving...' : 'Save Changes'}\n              </button>\n              <button\n                onClick={() => setEditing(false)}\n                disabled={saving}\n                className=\"px-4 py-2 border rounded hover:bg-gray-50\"\n              >\n                Cancel\n              </button>\n            </>\n          ) : (\n            <button\n              onClick={() => setEditing(true)}\n              className=\"px-4 py-2 border rounded hover:bg-gray-50\"\n            >\n              Edit Profile\n            </button>\n          )}\n        </div>\n      </div>\n\n      <div className=\"mt-8 pt-8 border-t\">\n        <button\n          onClick={onLogout}\n          className=\"text-red-600 hover:text-red-700\"\n        >\n          Log Out\n        </button>\n      </div>\n    </div>\n  )\n}\n\nexport default CustomerPortal\n","'use client'\n\nimport { useState, useEffect, useCallback } from 'react'\n\ninterface CustomerOrder {\n  id: string\n  orderNumber: number\n  processedAt: string\n  financialStatus: string\n  fulfillmentStatus: string\n  totalPrice: { amount: string; currencyCode: string }\n  lineItems: Array<{\n    title: string\n    quantity: number\n    variant: {\n      image: { url: string; altText: string } | null\n      price: { amount: string; currencyCode: string }\n    }\n  }>\n}\n\ninterface CustomerSubscription {\n  id: string\n  status: string\n  nextBillingDate: string\n  product: { title: string }\n  price: { amount: string; currencyCode: string }\n}\n\ninterface CustomerProfile {\n  id: string\n  email: string\n  firstName: string | null\n  lastName: string | null\n  phone: string | null\n  acceptsMarketing: boolean\n  defaultAddress: {\n    address1: string\n    address2: string | null\n    city: string\n    province: string\n    zip: string\n    country: string\n  } | null\n}\n\ninterface CustomerState {\n  isLoggedIn: boolean\n  accessToken: string | null\n  profile: CustomerProfile | null\n  orders: CustomerOrder[]\n  subscriptions: CustomerSubscription[]\n  loading: boolean\n  error: Error | null\n}\n\ninterface UseCustomerOptions {\n  apiKey?: string\n  baseUrl?: string\n}\n\nconst STORAGE_KEY = 'adsurf-customer-token'\n\nexport function useCustomer(options: UseCustomerOptions = {}) {\n  const [state, setState] = useState<CustomerState>({\n    isLoggedIn: false,\n    accessToken: null,\n    profile: null,\n    orders: [],\n    subscriptions: [],\n    loading: true,\n    error: null,\n  })\n\n  const baseUrl =\n    options.baseUrl || process.env.NEXT_PUBLIC_PLATFORM_URL || ''\n  const apiKey =\n    options.apiKey || process.env.NEXT_PUBLIC_PLATFORM_API_KEY || ''\n\n  const fetchCustomerData = useCallback(\n    async (token: string) => {\n      try {\n        setState((prev) => ({ ...prev, loading: true, error: null }))\n\n        // Fetch customer profile\n        const profileRes = await fetch(\n          `${baseUrl}/api/storefront/customer/profile?token=${encodeURIComponent(token)}`,\n          { headers: { 'x-brand-api-key': apiKey } }\n        )\n        const profileData = await profileRes.json()\n\n        // Fetch orders\n        const ordersRes = await fetch(\n          `${baseUrl}/api/storefront/customer/orders?token=${encodeURIComponent(token)}`,\n          { headers: { 'x-brand-api-key': apiKey } }\n        )\n        const ordersData = await ordersRes.json()\n\n        // Fetch subscriptions\n        const subsRes = await fetch(\n          `${baseUrl}/api/storefront/customer/subscriptions?token=${encodeURIComponent(token)}`,\n          { headers: { 'x-brand-api-key': apiKey } }\n        )\n        const subsData = await subsRes.json()\n\n        setState((prev) => ({\n          ...prev,\n          profile: profileData.customer || null,\n          orders: ordersData.orders || [],\n          subscriptions: subsData.subscriptions || [],\n          loading: false,\n        }))\n      } catch (err) {\n        setState((prev) => ({\n          ...prev,\n          error:\n            err instanceof Error\n              ? err\n              : new Error('Failed to fetch customer data'),\n          loading: false,\n        }))\n      }\n    },\n    [baseUrl, apiKey]\n  )\n\n  // Load token from storage on mount\n  useEffect(() => {\n    if (typeof window === 'undefined') return\n\n    const token = localStorage.getItem(STORAGE_KEY)\n    if (token) {\n      setState((prev) => ({ ...prev, isLoggedIn: true, accessToken: token }))\n      fetchCustomerData(token)\n    } else {\n      setState((prev) => ({ ...prev, loading: false }))\n    }\n  }, [fetchCustomerData])\n\n  const login = useCallback(\n    (accessToken: string) => {\n      if (typeof window !== 'undefined') {\n        localStorage.setItem(STORAGE_KEY, accessToken)\n      }\n      setState((prev) => ({ ...prev, isLoggedIn: true, accessToken }))\n      fetchCustomerData(accessToken)\n    },\n    [fetchCustomerData]\n  )\n\n  const logout = useCallback(() => {\n    if (typeof window !== 'undefined') {\n      localStorage.removeItem(STORAGE_KEY)\n    }\n    setState({\n      isLoggedIn: false,\n      accessToken: null,\n      profile: null,\n      orders: [],\n      subscriptions: [],\n      loading: false,\n      error: null,\n    })\n  }, [])\n\n  const refetch = useCallback(() => {\n    if (state.accessToken) {\n      fetchCustomerData(state.accessToken)\n    }\n  }, [state.accessToken, fetchCustomerData])\n\n  const updateProfile = useCallback(\n    async (updates: Partial<Pick<CustomerProfile, 'firstName' | 'lastName' | 'phone' | 'acceptsMarketing'>>) => {\n      if (!state.accessToken) {\n        throw new Error('Not logged in')\n      }\n\n      const response = await fetch(\n        `${baseUrl}/api/storefront/customer/profile`,\n        {\n          method: 'PATCH',\n          headers: {\n            'Content-Type': 'application/json',\n            'x-brand-api-key': apiKey,\n            'x-customer-token': state.accessToken,\n          },\n          body: JSON.stringify(updates),\n        }\n      )\n\n      if (!response.ok) {\n        throw new Error('Failed to update profile')\n      }\n\n      const data = await response.json()\n      setState((prev) => ({\n        ...prev,\n        profile: data.customer || prev.profile,\n      }))\n\n      return data.customer\n    },\n    [state.accessToken, baseUrl, apiKey]\n  )\n\n  return {\n    ...state,\n    login,\n    logout,\n    refetch,\n    updateProfile,\n  }\n}\n\nexport type { CustomerOrder, CustomerSubscription, CustomerProfile }\n","'use client'\n\nimport { useState, useCallback } from 'react'\n\ninterface SubscriptionProduct {\n  variantId: string\n  quantity: number\n  sellingPlanId: string\n}\n\ninterface SubscriptionResult {\n  subscriptionId: string\n  status: string\n  nextBillingDate: string\n}\n\ninterface UseSubscriptionOptions {\n  apiKey?: string\n  baseUrl?: string\n}\n\nexport function useSubscription(options: UseSubscriptionOptions = {}) {\n  const [loading, setLoading] = useState(false)\n  const [error, setError] = useState<Error | null>(null)\n\n  const baseUrl =\n    options.baseUrl || process.env.NEXT_PUBLIC_PLATFORM_URL || ''\n  const apiKey =\n    options.apiKey || process.env.NEXT_PUBLIC_PLATFORM_API_KEY || ''\n\n  const subscribe = useCallback(\n    async (\n      customerToken: string,\n      products: SubscriptionProduct[]\n    ): Promise<SubscriptionResult> => {\n      try {\n        setLoading(true)\n        setError(null)\n\n        const response = await fetch(\n          `${baseUrl}/api/storefront/customer/subscribe`,\n          {\n            method: 'POST',\n            headers: {\n              'Content-Type': 'application/json',\n              'x-brand-api-key': apiKey,\n              'x-customer-token': customerToken,\n            },\n            body: JSON.stringify({ products }),\n          }\n        )\n\n        if (!response.ok) {\n          const errorData = await response.json().catch(() => ({}))\n          throw new Error(\n            errorData.error || 'Failed to create subscription'\n          )\n        }\n\n        return await response.json()\n      } catch (err) {\n        const error =\n          err instanceof Error ? err : new Error('Subscription failed')\n        setError(error)\n        throw error\n      } finally {\n        setLoading(false)\n      }\n    },\n    [baseUrl, apiKey]\n  )\n\n  const cancelSubscription = useCallback(\n    async (\n      customerToken: string,\n      subscriptionId: string\n    ): Promise<{ success: boolean }> => {\n      try {\n        setLoading(true)\n        setError(null)\n\n        const response = await fetch(\n          `${baseUrl}/api/storefront/customer/subscriptions/${subscriptionId}`,\n          {\n            method: 'DELETE',\n            headers: {\n              'Content-Type': 'application/json',\n              'x-brand-api-key': apiKey,\n              'x-customer-token': customerToken,\n            },\n          }\n        )\n\n        if (!response.ok) {\n          const errorData = await response.json().catch(() => ({}))\n          throw new Error(\n            errorData.error || 'Failed to cancel subscription'\n          )\n        }\n\n        return await response.json()\n      } catch (err) {\n        const error =\n          err instanceof Error ? err : new Error('Cancellation failed')\n        setError(error)\n        throw error\n      } finally {\n        setLoading(false)\n      }\n    },\n    [baseUrl, apiKey]\n  )\n\n  const pauseSubscription = useCallback(\n    async (\n      customerToken: string,\n      subscriptionId: string,\n      resumeDate?: string\n    ): Promise<{ success: boolean; resumeDate: string }> => {\n      try {\n        setLoading(true)\n        setError(null)\n\n        const response = await fetch(\n          `${baseUrl}/api/storefront/customer/subscriptions/${subscriptionId}/pause`,\n          {\n            method: 'POST',\n            headers: {\n              'Content-Type': 'application/json',\n              'x-brand-api-key': apiKey,\n              'x-customer-token': customerToken,\n            },\n            body: JSON.stringify({ resumeDate }),\n          }\n        )\n\n        if (!response.ok) {\n          const errorData = await response.json().catch(() => ({}))\n          throw new Error(errorData.error || 'Failed to pause subscription')\n        }\n\n        return await response.json()\n      } catch (err) {\n        const error = err instanceof Error ? err : new Error('Pause failed')\n        setError(error)\n        throw error\n      } finally {\n        setLoading(false)\n      }\n    },\n    [baseUrl, apiKey]\n  )\n\n  const resumeSubscription = useCallback(\n    async (\n      customerToken: string,\n      subscriptionId: string\n    ): Promise<{ success: boolean }> => {\n      try {\n        setLoading(true)\n        setError(null)\n\n        const response = await fetch(\n          `${baseUrl}/api/storefront/customer/subscriptions/${subscriptionId}/resume`,\n          {\n            method: 'POST',\n            headers: {\n              'Content-Type': 'application/json',\n              'x-brand-api-key': apiKey,\n              'x-customer-token': customerToken,\n            },\n          }\n        )\n\n        if (!response.ok) {\n          const errorData = await response.json().catch(() => ({}))\n          throw new Error(errorData.error || 'Failed to resume subscription')\n        }\n\n        return await response.json()\n      } catch (err) {\n        const error =\n          err instanceof Error ? err : new Error('Resume failed')\n        setError(error)\n        throw error\n      } finally {\n        setLoading(false)\n      }\n    },\n    [baseUrl, apiKey]\n  )\n\n  const updateSubscriptionFrequency = useCallback(\n    async (\n      customerToken: string,\n      subscriptionId: string,\n      sellingPlanId: string\n    ): Promise<{ success: boolean }> => {\n      try {\n        setLoading(true)\n        setError(null)\n\n        const response = await fetch(\n          `${baseUrl}/api/storefront/customer/subscriptions/${subscriptionId}/frequency`,\n          {\n            method: 'PATCH',\n            headers: {\n              'Content-Type': 'application/json',\n              'x-brand-api-key': apiKey,\n              'x-customer-token': customerToken,\n            },\n            body: JSON.stringify({ sellingPlanId }),\n          }\n        )\n\n        if (!response.ok) {\n          const errorData = await response.json().catch(() => ({}))\n          throw new Error(\n            errorData.error || 'Failed to update subscription frequency'\n          )\n        }\n\n        return await response.json()\n      } catch (err) {\n        const error =\n          err instanceof Error ? err : new Error('Update failed')\n        setError(error)\n        throw error\n      } finally {\n        setLoading(false)\n      }\n    },\n    [baseUrl, apiKey]\n  )\n\n  const skipNextDelivery = useCallback(\n    async (\n      customerToken: string,\n      subscriptionId: string\n    ): Promise<{ success: boolean; nextBillingDate: string }> => {\n      try {\n        setLoading(true)\n        setError(null)\n\n        const response = await fetch(\n          `${baseUrl}/api/storefront/customer/subscriptions/${subscriptionId}/skip`,\n          {\n            method: 'POST',\n            headers: {\n              'Content-Type': 'application/json',\n              'x-brand-api-key': apiKey,\n              'x-customer-token': customerToken,\n            },\n          }\n        )\n\n        if (!response.ok) {\n          const errorData = await response.json().catch(() => ({}))\n          throw new Error(errorData.error || 'Failed to skip delivery')\n        }\n\n        return await response.json()\n      } catch (err) {\n        const error =\n          err instanceof Error ? err : new Error('Skip failed')\n        setError(error)\n        throw error\n      } finally {\n        setLoading(false)\n      }\n    },\n    [baseUrl, apiKey]\n  )\n\n  return {\n    loading,\n    error,\n    subscribe,\n    cancelSubscription,\n    pauseSubscription,\n    resumeSubscription,\n    updateSubscriptionFrequency,\n    skipNextDelivery,\n  }\n}\n\nexport type { SubscriptionProduct, SubscriptionResult }\n","'use client'\n\nimport React, { useState } from 'react'\nimport type { Product } from '../../client/api'\nimport { formatMoney } from '../../utils/money'\n\nexport interface SellingPlan {\n  id: string\n  name: string\n  description?: string\n  priceAdjustmentType: 'percentage' | 'fixed_amount' | 'price'\n  priceAdjustmentValue: number\n  deliveryFrequency: string\n  deliveryInterval: 'day' | 'week' | 'month' | 'year'\n  deliveryIntervalCount: number\n}\n\nexport interface SubscribeWidgetProps {\n  product: Product\n  variant: Product['variants'][0]\n  sellingPlans: SellingPlan[]\n  className?: string\n  onSubscribe?: (variantId: string, sellingPlanId: string, quantity: number) => void\n  onOneTimePurchase?: (variantId: string, quantity: number) => void\n  showOneTimePurchase?: boolean\n  defaultSelection?: 'subscribe' | 'one-time'\n  priceFormatter?: (amount: number, currency: string) => string\n}\n\nexport function SubscribeWidget({\n  product,\n  variant,\n  sellingPlans,\n  className = '',\n  onSubscribe,\n  onOneTimePurchase,\n  showOneTimePurchase = true,\n  defaultSelection = 'subscribe',\n  priceFormatter,\n}: SubscribeWidgetProps) {\n  const [purchaseType, setPurchaseType] = useState<'subscribe' | 'one-time'>(\n    defaultSelection\n  )\n  const [selectedPlanId, setSelectedPlanId] = useState(sellingPlans[0]?.id || '')\n  const [quantity, setQuantity] = useState(1)\n  const [isLoading, setIsLoading] = useState(false)\n\n  const formatPrice = (amount: number) => {\n    if (priceFormatter) {\n      return priceFormatter(amount, variant.currency)\n    }\n    return formatMoney(amount, { currency: variant.currency })\n  }\n\n  const calculateSubscriptionPrice = (plan: SellingPlan): number => {\n    const basePrice = variant.price\n\n    switch (plan.priceAdjustmentType) {\n      case 'percentage':\n        return basePrice * (1 - plan.priceAdjustmentValue / 100)\n      case 'fixed_amount':\n        return basePrice - plan.priceAdjustmentValue\n      case 'price':\n        return plan.priceAdjustmentValue\n      default:\n        return basePrice\n    }\n  }\n\n  const selectedPlan = sellingPlans.find((p) => p.id === selectedPlanId)\n  const subscriptionPrice = selectedPlan\n    ? calculateSubscriptionPrice(selectedPlan)\n    : variant.price\n  const savings = variant.price - subscriptionPrice\n  const savingsPercentage = Math.round((savings / variant.price) * 100)\n\n  const handleSubmit = async () => {\n    setIsLoading(true)\n    try {\n      if (purchaseType === 'subscribe' && selectedPlanId) {\n        await onSubscribe?.(variant.id, selectedPlanId, quantity)\n      } else {\n        await onOneTimePurchase?.(variant.id, quantity)\n      }\n    } finally {\n      setIsLoading(false)\n    }\n  }\n\n  const formatDeliveryInterval = (plan: SellingPlan): string => {\n    const count = plan.deliveryIntervalCount\n    const interval = plan.deliveryInterval\n\n    if (count === 1) {\n      return `Every ${interval}`\n    }\n    return `Every ${count} ${interval}s`\n  }\n\n  return (\n    <div className={`space-y-4 ${className}`}>\n      {/* Purchase type selection */}\n      <div className=\"space-y-2\">\n        {/* Subscribe option */}\n        <label\n          className={`flex items-start gap-3 p-4 border rounded-lg cursor-pointer transition-colors ${\n            purchaseType === 'subscribe'\n              ? 'border-black bg-gray-50'\n              : 'border-gray-200 hover:border-gray-300'\n          }`}\n        >\n          <input\n            type=\"radio\"\n            name=\"purchase-type\"\n            value=\"subscribe\"\n            checked={purchaseType === 'subscribe'}\n            onChange={() => setPurchaseType('subscribe')}\n            className=\"mt-1\"\n          />\n          <div className=\"flex-1\">\n            <div className=\"flex items-center justify-between\">\n              <span className=\"font-medium\">Subscribe & Save</span>\n              {savingsPercentage > 0 && (\n                <span className=\"text-sm font-medium text-green-600\">\n                  Save {savingsPercentage}%\n                </span>\n              )}\n            </div>\n            <p className=\"text-sm text-gray-600 mt-1\">\n              {formatPrice(subscriptionPrice)} per delivery\n            </p>\n          </div>\n        </label>\n\n        {/* One-time purchase option */}\n        {showOneTimePurchase && (\n          <label\n            className={`flex items-start gap-3 p-4 border rounded-lg cursor-pointer transition-colors ${\n              purchaseType === 'one-time'\n                ? 'border-black bg-gray-50'\n                : 'border-gray-200 hover:border-gray-300'\n            }`}\n          >\n            <input\n              type=\"radio\"\n              name=\"purchase-type\"\n              value=\"one-time\"\n              checked={purchaseType === 'one-time'}\n              onChange={() => setPurchaseType('one-time')}\n              className=\"mt-1\"\n            />\n            <div className=\"flex-1\">\n              <div className=\"flex items-center justify-between\">\n                <span className=\"font-medium\">One-time purchase</span>\n              </div>\n              <p className=\"text-sm text-gray-600 mt-1\">\n                {formatPrice(variant.price)}\n              </p>\n            </div>\n          </label>\n        )}\n      </div>\n\n      {/* Subscription plan selection */}\n      {purchaseType === 'subscribe' && sellingPlans.length > 1 && (\n        <div>\n          <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n            Delivery Frequency\n          </label>\n          <select\n            value={selectedPlanId}\n            onChange={(e) => setSelectedPlanId(e.target.value)}\n            className=\"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\"\n          >\n            {sellingPlans.map((plan) => (\n              <option key={plan.id} value={plan.id}>\n                {formatDeliveryInterval(plan)}\n                {plan.priceAdjustmentType === 'percentage' &&\n                  plan.priceAdjustmentValue > 0 &&\n                  ` (${plan.priceAdjustmentValue}% off)`}\n              </option>\n            ))}\n          </select>\n        </div>\n      )}\n\n      {/* Quantity selector */}\n      <div>\n        <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n          Quantity\n        </label>\n        <div className=\"flex items-center border rounded-lg w-fit\">\n          <button\n            type=\"button\"\n            onClick={() => setQuantity(Math.max(1, quantity - 1))}\n            className=\"px-4 py-2 hover:bg-gray-50 transition-colors\"\n            disabled={quantity <= 1}\n          >\n            -\n          </button>\n          <span className=\"px-4 py-2 min-w-[3rem] text-center\">{quantity}</span>\n          <button\n            type=\"button\"\n            onClick={() => setQuantity(quantity + 1)}\n            className=\"px-4 py-2 hover:bg-gray-50 transition-colors\"\n          >\n            +\n          </button>\n        </div>\n      </div>\n\n      {/* Total */}\n      <div className=\"flex items-center justify-between py-3 border-t\">\n        <span className=\"font-medium\">Total</span>\n        <div className=\"text-right\">\n          <span className=\"text-lg font-semibold\">\n            {formatPrice(\n              (purchaseType === 'subscribe' ? subscriptionPrice : variant.price) *\n                quantity\n            )}\n          </span>\n          {purchaseType === 'subscribe' && (\n            <p className=\"text-sm text-gray-500\">per delivery</p>\n          )}\n        </div>\n      </div>\n\n      {/* Submit button */}\n      <button\n        onClick={handleSubmit}\n        disabled={isLoading || !variant.availableForSale}\n        className={`w-full py-3 px-6 rounded-lg font-medium transition-colors ${\n          variant.availableForSale\n            ? 'bg-black text-white hover:bg-gray-800'\n            : 'bg-gray-200 text-gray-500 cursor-not-allowed'\n        }`}\n      >\n        {isLoading\n          ? 'Processing...'\n          : !variant.availableForSale\n          ? 'Sold Out'\n          : purchaseType === 'subscribe'\n          ? 'Subscribe Now'\n          : 'Add to Cart'}\n      </button>\n\n      {/* Subscription benefits */}\n      {purchaseType === 'subscribe' && (\n        <div className=\"text-sm text-gray-600 space-y-1\">\n          <p className=\"flex items-center gap-2\">\n            <CheckIcon className=\"w-4 h-4 text-green-600\" />\n            Free shipping on all subscription orders\n          </p>\n          <p className=\"flex items-center gap-2\">\n            <CheckIcon className=\"w-4 h-4 text-green-600\" />\n            Cancel or pause anytime\n          </p>\n          <p className=\"flex items-center gap-2\">\n            <CheckIcon className=\"w-4 h-4 text-green-600\" />\n            Manage your subscription easily\n          </p>\n        </div>\n      )}\n    </div>\n  )\n}\n\nfunction CheckIcon({ className }: { className?: string }) {\n  return (\n    <svg\n      className={className}\n      fill=\"none\"\n      stroke=\"currentColor\"\n      viewBox=\"0 0 24 24\"\n    >\n      <path\n        strokeLinecap=\"round\"\n        strokeLinejoin=\"round\"\n        strokeWidth={2}\n        d=\"M5 13l4 4L19 7\"\n      />\n    </svg>\n  )\n}\n\nexport default SubscribeWidget\n"],"mappings":"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","names":["import_jsx_runtime","import_jsx_runtime","import_react","import_react","import_react","error","import_jsx_runtime","import_react","import_jsx_runtime"]}